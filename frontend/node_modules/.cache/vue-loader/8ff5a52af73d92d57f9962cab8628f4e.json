{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotForm.vue","mtime":1619105777513},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y3JlYXRlUm9ib3R9IGZyb20gIkAvYXBpL3JvYm90IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUm9ib3RGb3JtJywKICBwcm9wczogewogICAgY3JlZGVudGlhbE9wdGlvbnM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICBzdHJhdGVneU9wdGlvbnM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNyZWRlbnRpYWw6IG51bGwsCiAgICAgICAgcGFpcjogJycsCiAgICAgICAgbWFya2V0VHlwZTogbnVsbCwKICAgICAgICBiYXNlQ3VycmVuY3k6ICcnLAogICAgICAgIHF1b3RlQ3VycmVuY3k6ICcnLAogICAgICAgIHRhcmdldEN1cnJlbmN5OiAnJywKICAgICAgICBzdHJhdGVneTogbnVsbCwKICAgICAgfSwKICAgICAgbWFya2V0VHlwZU9wdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICAndmFsdWUnOiBudWxsLAogICAgICAgICAgJ3RleHQnOiAn6YCJ5oup5biC5Zy657G75Z6LJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICd2YWx1ZSc6ICdzcG90cycsCiAgICAgICAgICAndGV4dCc6ICfnjrDotKcnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgJ3ZhbHVlJzogJ21hcmdpbicsCiAgICAgICAgICAndGV4dCc6ICfmnaDmnYYnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgJ3ZhbHVlJzogJ2xpbmVhcl9kZWxpdmVyeScsCiAgICAgICAgICAndGV4dCc6ICfnur/mgKfkuqTlibLlkIjnuqYnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgJ3ZhbHVlJzogJ2xpbmVhcl9wZXJwZXR1YWwnLAogICAgICAgICAgJ3RleHQnOiAn57q/5oCn5rC457ut5ZCI57qmJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICd2YWx1ZSc6ICdpbnZlcnNlX2RlbGl2ZXJ5JywKICAgICAgICAgICd0ZXh0JzogJ+WPjeWQkeS6pOWJsuWQiOe6picsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAndmFsdWUnOiAnaW52ZXJzZV9wZXJwZXR1YWwnLAogICAgICAgICAgJ3RleHQnOiAn5Y+N5ZCR5rC457ut5ZCI57qmJywKICAgICAgICB9LAogICAgICBdLAogICAgICBzdWJtaXR0aW5nOiBmYWxzZSwKICAgICAgZm9ybUVycm9yczoge30KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIG9uU3VibWl0KGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZQogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAibmFtZSI6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgICJjcmVkZW50aWFsIjogdGhpcy5mb3JtLmNyZWRlbnRpYWwsCiAgICAgICAgIm1hcmtldF90eXBlIjogdGhpcy5mb3JtLm1hcmtldFR5cGUsCiAgICAgICAgInBhaXIiOiB0aGlzLmZvcm0ucGFpciwKICAgICAgICAiYmFzZV9jdXJyZW5jeSI6IHRoaXMuZm9ybS5iYXNlQ3VycmVuY3ksCiAgICAgICAgInF1b3RlX2N1cnJlbmN5IjogdGhpcy5mb3JtLnF1b3RlQ3VycmVuY3ksCiAgICAgICAgInN0cmF0ZWd5IjogdGhpcy5mb3JtLnN0cmF0ZWd5LAogICAgICAgICJ0YXJnZXRfY3VycmVuY3kiOiB0aGlzLmZvcm0udGFyZ2V0Q3VycmVuY3ksCiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBjcmVhdGVSb2JvdChkYXRhKQogICAgICAgIHRoaXMuc3VibWl0dGluZyA9IGZhbHNlCiAgICAgICAgYXdhaXQgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdyb2JvdC1saXN0J30pCiAgICAgICAgLy8gdG9kbzog5Yib5bu65oiQ5Yqf6YCa55+lCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHsKICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgn5pyN5Yqh56uv6ZSZ6K+vJywgewogICAgICAgICAgICAgIHRpdGxlOiAn5py65Zmo5Lq65Yib5bu65aSx6LSlJywKICAgICAgICAgICAgICBhdXRvSGlkZURlbGF5OiAzMDAwLAogICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLWNlbnRlcicsCiAgICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgICAvLyBmb3JtIHZhbGlkYXRpb24gZXJyb3IKICAgICAgICAgICAgdGhpcy5mb3JtRXJyb3JzID0gZXJyb3IucmVzcG9uc2UuZGF0YQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGVycm9yLm1lc3NhZ2UsIHsKICAgICAgICAgICAgdGl0bGU6ICfmnLrlmajkurrliJvlu7rlpLHotKUnLAogICAgICAgICAgICBhdXRvSGlkZURlbGF5OiAzMDAwLAogICAgICAgICAgICB0b2FzdGVyOiAnYi10b2FzdGVyLXRvcC1jZW50ZXInLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2UKICAgICAgfQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["RobotForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RobotForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-form @submit=\"onSubmit\">\n    <b-row>\n      <b-col sm=12 md=\"8\">\n        <b-card\n            header=\"基本设置\"\n            header-tag=\"header\"\n        >\n          <b-row>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"名字:\"\n                  label-for=\"id_name\"\n              >\n                <b-form-input\n                    id=\"id_name\"\n                    v-model=\"form.name\"\n                    type=\"text\"\n                    :state=\"formErrors.name===undefined?null:false\"\n                ></b-form-input>\n                <b-form-invalid-feedback :state=\"formErrors.name===undefined?null:false\">\n                  {{ formErrors.name !== undefined && formErrors.name[0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"交易所凭证:\"\n                  label-for=\"id_credential\"\n              >\n                <b-form-select\n                    id=\"id_credential\"\n                    v-model=\"form.credential\"\n                    :options=\"credentialOptions\"\n                    required\n                    :state=\"formErrors.credential===undefined?null:false\"\n                ></b-form-select>\n                <b-form-invalid-feedback :state=\"formErrors.credential===undefined?null:false\">\n                  {{ formErrors.credential !== undefined && formErrors.credential[0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n          </b-row>\n        </b-card>\n        <b-card\n            header=\"市场\"\n            header-tag=\"header\"\n            class=\"mt-3\"\n        >\n          <b-row>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"市场类型:\"\n                  label-for=\"id_market_type\"\n              >\n                <b-form-select\n                    id=\"idMarketType\"\n                    v-model=\"form.marketType\"\n                    :options=\"marketTypeOptions\"\n                    required\n                    :state=\"formErrors['market_type']===undefined?null:false\"\n                ></b-form-select>\n                <b-form-invalid-feedback :state=\"formErrors['market_type']===undefined?null:false\">\n                  {{ formErrors['market_type'] !== undefined && formErrors['market_type'][0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"交易对:\"\n                  label-for=\"id_pair\"\n              >\n                <b-form-input\n                    type=\"text\"\n                    v-model=\"form.pair\"\n                    id=\"id_pair\"\n                    :state=\"formErrors.pair===undefined?null:false\"\n                >\n                </b-form-input>\n                <b-form-invalid-feedback :state=\"formErrors.pair===undefined?null:false\">\n                  {{ formErrors.pair !== undefined && formErrors.pair[0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n            <!-- spots -->\n            <template v-if=\"form.marketType==='spots'\">\n              <b-col sm=\"12\" md=\"6\">\n                <b-form-group\n                    label=\"基础币种:\"\n                    label-for=\"id_base_currency\"\n                    description=\"通常为交易对中作为资产被交易的币种。例如 BTCUSDT，基础币种为 BTC。\"\n                >\n                  <b-form-input\n                      type=\"text\"\n                      v-model=\"form.baseCurrency\"\n                      id=\"id_base_currency\"\n                      :state=\"formErrors['base_currency']===undefined?null:false\"\n                  >\n                  </b-form-input>\n                  <b-form-invalid-feedback :state=\"formErrors['base_currency']===undefined?null:false\">\n                    {{ formErrors['base_currency'] !== undefined && formErrors['base_currency'][0] }}\n                  </b-form-invalid-feedback>\n                </b-form-group>\n              </b-col>\n              <b-col sm=\"12\" md=\"6\">\n                <b-form-group\n                    label=\"计价币种:\"\n                    label-for=\"id_quote_currency\"\n                    description=\"通常为交易对中对被交易资产计价的币种。例如 BTCUSDT，计价币种为 USDT。\"\n                >\n                  <b-form-input\n                      type=\"text\"\n                      v-model=\"form.quoteCurrency\"\n                      id=\"id_quote_currency\"\n                      :state=\"formErrors['quote_currency']===undefined?null:false\"\n                  >\n                  </b-form-input>\n                  <b-form-invalid-feedback :state=\"formErrors['quote_currency']===undefined?null:false\">\n                    {{ formErrors['quote_currency'] !== undefined && formErrors['quote_currency'][0] }}\n                  </b-form-invalid-feedback>\n                </b-form-group>\n              </b-col>\n            </template>\n            <!-- spots end -->\n          </b-row>\n        </b-card>\n        <b-card\n            header=\"策略\"\n            header-tag=\"header\"\n            class=\"mt-3\"\n        >\n          <b-row>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"策略:\"\n                  label-for=\"id_strategy_template\"\n              >\n                <b-form-select\n                    v-model=\"form.strategy\"\n                    :options=\"strategyOptions\"\n                    id=\"id_strategy_template\"\n                    required\n                    :state=\"formErrors.strategy===undefined?null:false\"\n                ></b-form-select>\n                <b-form-invalid-feedback :state=\"formErrors.strategy===undefined?null:false\">\n                  {{ formErrors.strategy !== undefined && formErrors.strategy[0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n            <b-col sm=\"12\" md=\"6\">\n              <b-form-group\n                  label=\"目标币种:\"\n                  label-for=\"id_target_currency\"\n                  description=\"合约交易为保证金币种；现货交易为想赚取的币种。\"\n              >\n                <b-form-input\n                    type=\"text\"\n                    v-model=\"form.targetCurrency\"\n                    id=\"id_target_currency\"\n                    :state=\"formErrors['target_currency']===undefined?null:false\"\n                >\n                </b-form-input>\n                <b-form-invalid-feedback :state=\"formErrors['target_currency']===undefined?null:false\">\n                  {{ formErrors['target_currency'] !== undefined && formErrors['target_currency'][0] }}\n                </b-form-invalid-feedback>\n              </b-form-group>\n            </b-col>\n          </b-row>\n        </b-card>\n      </b-col>\n      <b-col sm=12 md=\"4\">\n        <div>\n          <b-card title=\"帮助文档\">\n            <b-card-text>\n              <a href=\"https://yufuquant.github.io/yufuquant-user-manual/robot/#%E5%88%9B%E5%BB%BA%E6%9C%BA%E5%99%A8%E4%BA%BA\"\n                 target=\"_blank\">公牛比特量化用户手册：创建机器人</a>\n            </b-card-text>\n          </b-card>\n        </div>\n        <b-button block type=\"submit\" class=\"mt-3\" variant=\"primary\" :disabled=\"submitting\">创建</b-button>\n      </b-col>\n    </b-row>\n  </b-form>\n</template>\n\n<script>\nimport {createRobot} from \"@/api/robot\";\n\nexport default {\n  name: 'RobotForm',\n  props: {\n    credentialOptions: {\n      type: Array\n    },\n    strategyOptions: {\n      type: Array\n    },\n  },\n  data() {\n    return {\n      form: {\n        name: '',\n        credential: null,\n        pair: '',\n        marketType: null,\n        baseCurrency: '',\n        quoteCurrency: '',\n        targetCurrency: '',\n        strategy: null,\n      },\n      marketTypeOptions: [\n        {\n          'value': null,\n          'text': '选择市场类型',\n        },\n        {\n          'value': 'spots',\n          'text': '现货',\n        },\n        {\n          'value': 'margin',\n          'text': '杠杆',\n        },\n        {\n          'value': 'linear_delivery',\n          'text': '线性交割合约',\n        },\n        {\n          'value': 'linear_perpetual',\n          'text': '线性永续合约',\n        },\n        {\n          'value': 'inverse_delivery',\n          'text': '反向交割合约',\n        },\n        {\n          'value': 'inverse_perpetual',\n          'text': '反向永续合约',\n        },\n      ],\n      submitting: false,\n      formErrors: {}\n    }\n  },\n  methods: {\n    async onSubmit(event) {\n      event.preventDefault()\n      this.submitting = true\n      let data = {\n        \"name\": this.form.name,\n        \"credential\": this.form.credential,\n        \"market_type\": this.form.marketType,\n        \"pair\": this.form.pair,\n        \"base_currency\": this.form.baseCurrency,\n        \"quote_currency\": this.form.quoteCurrency,\n        \"strategy\": this.form.strategy,\n        \"target_currency\": this.form.targetCurrency,\n      }\n      try {\n        await createRobot(data)\n        this.submitting = false\n        await this.$router.push({name: 'robot-list'})\n        // todo: 创建成功通知\n      } catch (error) {\n        if (error.response) {\n          if (error.response.status === 500) {\n            this.$bvToast.toast('服务端错误', {\n              title: '机器人创建失败',\n              autoHideDelay: 3000,\n              toaster: 'b-toaster-top-center',\n              variant: 'danger',\n              appendToast: false\n            });\n          } else if (error.response.status === 400) {\n            // form validation error\n            this.formErrors = error.response.data\n          }\n        } else {\n          this.$bvToast.toast(error.message, {\n            title: '机器人创建失败',\n            autoHideDelay: 3000,\n            toaster: 'b-toaster-top-center',\n            variant: 'danger',\n            appendToast: false\n          });\n        }\n        this.submitting = false\n      }\n    },\n  },\n}\n</script>"]}]}