{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotListItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotListItem.vue","mtime":1619057276517},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgZGVsZXRlUm9ib3RzSWQgfSBmcm9tICcuLi9hcGknOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1JvYm90TGlzdEl0ZW0nLAogICAgcHJvcHM6IHsKICAgICAgICByb2JvdDogT2JqZWN0LAogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgcm9ib3RTdGF0dXNDbGFzcygpIHsKICAgICAgICAgICAgcmV0dXJuIG1vbWVudCgpLmRpZmYodGhpcy5yb2JvdC5waW5nVGltZSwgJ3NlY29uZHMnKSA8IDYwID8gJ3RleHQtc3VjY2VzcycgOiAndGV4dC1kYW5nZXInOwogICAgICAgIH0sCiAgICAgICAgcm9ib3RTdGF0dXNBbmltYXRpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvYm90U3RhdHVzQ2xhc3MgPT09ICd0ZXh0LWRhbmdlcicgPyAnJyA6ICd0aHJvYic7CiAgICAgICAgfSwKICAgICAgICBwcm9maXRDb2xvckNsYXNzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb2JvdC5wcm9maXQgPiAwID8gJ3RleHQtc3VjY2VzcycgOiB0aGlzLnJvYm90LnByb2ZpdCA8IDAgPyAndGV4dC1kYW5nZXInIDogJyc7CiAgICAgICAgfSwKICAgICAgICBwcm9maXQyNGhDb2xvckNsYXNzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb2JvdC5wcm9maXQyNGggPiAwID8gJ3RleHQtc3VjY2VzcycgOiB0aGlzLnJvYm90LnByb2ZpdDI0aCA8IDAgPyAndGV4dC1kYW5nZXInIDogJyc7CiAgICAgICAgfSwKICAgIH0sCiAgICBmaWx0ZXJzOiB7CiAgICAgICAgcm91bmRCeUN1cnJlbmN5KHZhbHVlLCBjdXJyZW5jeSkgewogICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbmN5KSB7CiAgICAgICAgICAgICAgICBjYXNlICdCVEMnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b0ZpeGVkKDQpOwogICAgICAgICAgICAgICAgY2FzZSAnVVNEVCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoMik7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIHNob3dNc2dCb3goKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm0gPSBhd2FpdCB0aGlzLiRidk1vZGFsLm1zZ0JveENvbmZpcm0oJ+WIoOmZpOacuuWZqOS6uuWwhuWQjOaXtuWIoOmZpOWFtuaJgOaciei1hOS6p+e7n+iuoeaVsOaNruOAgicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn56Gu6K6k5Yig6Zmk77yfJywKICAgICAgICAgICAgICAgIHNpemU6ICdzbScsCiAgICAgICAgICAgICAgICBidXR0b25TaXplOiAnc20nLAogICAgICAgICAgICAgICAgb2tWYXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgIG9rVGl0bGU6ICfnoa7orqQnLAogICAgICAgICAgICAgICAgY2FuY2VsVGl0bGU6ICflj5bmtognLAogICAgICAgICAgICAgICAgZm9vdGVyQ2xhc3M6ICdwLTInLAogICAgICAgICAgICAgICAgaGlkZUhlYWRlckNsb3NlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNlbnRlcmVkOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKCFjb25maXJtKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVJvYm90c0lkKHRoaXMucm9ib3Qucm9ib3RJZCk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoJyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGDml6Dms5XliKDpmaTmnLrlmajkurrmlbDmja7vvIzplJnor6/kv6Hmga/vvJoke2Vycm9yLmRhdGEgfHwgJ+acquefpemUmeivryd9YCwgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yig6Zmk5aSx6LSlJywKICAgICAgICAgICAgICAgICAgICBhdXRvSGlkZURlbGF5OiAzMDAwLAogICAgICAgICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLXJpZ2h0JywKICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAp9Owo="},{"version":3,"sources":["RobotListItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RobotListItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <b-card class=\"mb-4 card\">\n        <div class=\"d-flex align-items-center\">\n            <span :class=\"['mr-1', 'd-inline-flex', robotStatusClass]\">\n                <b-icon icon=\"circle-fill\" font-scale=\"0.6\" :animation=\"robotStatusAnimation\"></b-icon>\n            </span>\n            <router-link :to=\"{ name: 'robot', params: { id: robot.robotId } }\" class=\"font-weight-bold text-body\">\n                <span class=\"mr-2\">{{ robot.name }}</span>\n                <span class=\"text-muted font-weight-light\">{{ robot.exchangeNameZh }} {{ robot.pair }}</span>\n            </router-link>\n            <span class=\"ml-auto action-buttons\">\n                <router-link :to=\"{ name: 'robot-update', params: { id: robot.robotId } }\" class=\"mr-2\">\n                    <b-icon-pencil-square></b-icon-pencil-square>\n                </router-link>\n                <a href=\"#\" class=\"text-danger\" @click=\"showMsgBox\">\n                    <b-icon-trash></b-icon-trash>\n                </a>\n            </span>\n        </div>\n        <div class=\"d-flex justify-content-between mt-2\">\n            <span>\n                <span class=\"small text-muted\">收益率</span><br />\n                <span :class=\"[profitColorClass, 'h6']\">{{ robot.profitRatioPtg }}</span></span\n            >\n            <span>\n                <span class=\"small text-muted\">收益额({{ robot.targetCurrency }})</span><br />\n                <span :class=\"profitColorClass\">\n                    <small>{{ robot.profit | roundByCurrency(robot.targetCurrency) }}</small>\n                </span></span\n            >\n            <span>\n                <span class=\"small text-muted\">本金({{ robot.targetCurrency }})</span><br />\n                <span class=\"\">\n                    <small> {{ robot.principal | roundByCurrency(robot.targetCurrency) }}</small>\n                </span>\n            </span>\n            <span>\n                <span class=\"small text-muted\">余额({{ robot.targetCurrency }})</span><br /><span class=\"\">\n                    <small>{{ robot.balance | roundByCurrency(robot.targetCurrency) }}</small>\n                </span>\n            </span>\n        </div>\n        <!-- <div class=\"text-muted mt-2\">\n            <span class=\"mr-2\">{{ robot.exchangeNameZh }}</span>\n            <span>{{ robot.pair }}</span>\n            <span class=\"float-right\">{{ robot.durationDisplay }}</span>\n        </div> -->\n        <hr />\n        <div class=\"small d-flex justify-content-between\">\n            <div class=\"d-inline-block\">\n                <span class=\"mr-1 text-muted\">较前日</span>\n                <span :class=\"[profit24hColorClass, 'mr-1']\">\n                    <b-icon-caret-up-fill v-if=\"robot.profit24h > 0\"></b-icon-caret-up-fill>\n                    <b-icon-caret-down-fill v-if=\"robot.profit24h < 0\"></b-icon-caret-down-fill>\n                    {{ robot.profitRatioPtg24h }}\n                </span>\n                <span :class=\"profit24hColorClass\">\n                    {{ robot.profit24h | roundByCurrency(robot.targetCurrency) }}\n                    <span class=\"font-weight-light\"> {{ robot.targetCurrency }}</span>\n                </span>\n            </div>\n            <div class=\"d-inline-block\">\n                <b-icon icon=\"graph-up\" class=\"mr-1\"></b-icon>\n                <span class=\"\"> {{ robot.strategyName }} </span>\n                <span class=\"text-muted\"> {{ robot.durationDisplay }} </span>\n            </div>\n        </div>\n    </b-card>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { deleteRobotsId } from '../api';\n\nexport default {\n    name: 'RobotListItem',\n    props: {\n        robot: Object,\n    },\n    computed: {\n        robotStatusClass() {\n            return moment().diff(this.robot.pingTime, 'seconds') < 60 ? 'text-success' : 'text-danger';\n        },\n        robotStatusAnimation() {\n            return this.robotStatusClass === 'text-danger' ? '' : 'throb';\n        },\n        profitColorClass() {\n            return this.robot.profit > 0 ? 'text-success' : this.robot.profit < 0 ? 'text-danger' : '';\n        },\n        profit24hColorClass() {\n            return this.robot.profit24h > 0 ? 'text-success' : this.robot.profit24h < 0 ? 'text-danger' : '';\n        },\n    },\n    filters: {\n        roundByCurrency(value, currency) {\n            switch (currency) {\n                case 'BTC':\n                    return value.toFixed(4);\n                case 'USDT':\n                    return value.toFixed(2);\n                default:\n                    return value;\n            }\n        },\n    },\n    methods: {\n        async showMsgBox() {\n            const confirm = await this.$bvModal.msgBoxConfirm('删除机器人将同时删除其所有资产统计数据。', {\n                title: '确认删除？',\n                size: 'sm',\n                buttonSize: 'sm',\n                okVariant: 'danger',\n                okTitle: '确认',\n                cancelTitle: '取消',\n                footerClass: 'p-2',\n                hideHeaderClose: false,\n                centered: true,\n            });\n            if (!confirm) {\n                return;\n            }\n            try {\n                await deleteRobotsId(this.robot.robotId);\n                this.$emit('refresh');\n            } catch (error) {\n                this.$bvToast.toast(`无法删除机器人数据，错误信息：${error.data || '未知错误'}`, {\n                    title: '删除失败',\n                    autoHideDelay: 3000,\n                    toaster: 'b-toaster-top-right',\n                    variant: 'danger',\n                    appendToast: false,\n                });\n            }\n        },\n    },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n    margin: 40px 0 0;\n}\n\nul {\n    list-style-type: none;\n    padding: 0;\n}\n\nli {\n    display: inline-block;\n    margin: 0 10px;\n}\n\na {\n    color: #42b983;\n}\n\n.action-buttons {\n    display: none;\n}\n\n.card:hover .action-buttons {\n    display: inline-block;\n}\n</style>\n"]}]}