{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/navyxu/PycharmProjects/ox/frontend/src/views/RobotView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/views/RobotView.vue","mtime":1619057276520},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2dQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvcm9ib3QtY29uc29sZS9Mb2dQYW5lbCc7CmltcG9ydCBQYXJhbVByZXZpZXcgZnJvbSAnLi4vY29tcG9uZW50cy9QYXJhbVByZXZpZXcnOwppbXBvcnQgUGFyYW1Gb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUGFyYW1Gb3JtJzsKaW1wb3J0IFBvc2l0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvcm9ib3QtY29uc29sZS9Qb3NpdGlvbic7Ci8vIGltcG9ydCBBc3NldENoYXJ0IGZyb20gJy4uL2NvbXBvbmVudHMvcm9ib3QtY29uc29sZS9Bc3NldENoYXJ0JzsKaW1wb3J0IE92ZXJ2aWV3IGZyb20gJy4uL2NvbXBvbmVudHMvcm9ib3QtY29uc29sZS9PdmVydmlldyc7CmltcG9ydCBPcmRlciBmcm9tICdAL2NvbXBvbmVudHMvcm9ib3QtY29uc29sZS9PcmRlcic7CmltcG9ydCB7IGdldFJvYm90c0lkIH0gZnJvbSAnQC9hcGknOwppbXBvcnQgeyBnZXRSb2JvdFN0cmF0ZWd5U3BlY1ZpZXcsIHVwZGF0ZVJvYm90U3RyYXRlZ3lQYXJhbWV0ZXJzIH0gZnJvbSAnQC9hcGkvcm9ib3QnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1JvYm90VmlldycsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxvZ0xpc3Q6IFtdLAogICAgICAgICAgICByb2JvdElkOiBudWxsLAogICAgICAgICAgICBzdHJhdGVneVNwZWNWaWV3OiBudWxsLAogICAgICAgICAgICBvdmVydmlld0RhdGE6IG51bGwsCiAgICAgICAgICAgIHBvc2l0aW9uU3RvcmU6IG51bGwsCiAgICAgICAgICAgIG9yZGVyU3RvcmU6IG51bGwsCiAgICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKFsnYXV0aFRva2VuJ10pLAogICAgfSwKCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgTG9nUGFuZWwsCiAgICAgICAgUGFyYW1QcmV2aWV3LAogICAgICAgIFBhcmFtRm9ybSwKICAgICAgICBPdmVydmlldywKICAgICAgICBQb3NpdGlvbiwKICAgICAgICBPcmRlciwKICAgICAgICAvLyBBc3NldENoYXJ0LAogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRSb2JvdCgpOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0U3RyYXRlZ3lTcGVjVmlldygpOwogICAgICAgIHRoaXMuaW5pdFdlYnNvY2tldCgpOwogICAgfSwKICAgIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgICAgaWYgKHRoaXMud3MpIHsKICAgICAgICAgICAgdGhpcy5fc2VuZCh7CiAgICAgICAgICAgICAgICBjbWQ6ICd1bnN1YicsCiAgICAgICAgICAgICAgICB0b3BpY3M6IFtgcm9ib3QjJHt0aGlzLnJvYm90SWR9LmxvZ2AsIGByb2JvdCMke3RoaXMucm9ib3RJZH0uc3RvcmVgXSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHdzID0gdGhpcy53czsKICAgICAgICAgICAgdGhpcy53cyA9IG51bGw7CiAgICAgICAgICAgIHdzLmNsb3NlKCk7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBpbml0V2Vic29ja2V0KCkgewogICAgICAgICAgICAvLyDliJ3lp4vljJZ3ZW9zb2NrZXQKICAgICAgICAgICAgY29uc3Qgd3N1cmkgPSBgJHt3aW5kb3cuY29uZi53ZWJzb2NrZXRBcGlVcml9YDsgLy8g6L+Z5Liq5Zyw5Z2A55Sx5ZCO56uv56ul6Z6L5o+Q5L6bCiAgICAgICAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHdzdXJpKTsKICAgICAgICAgICAgdGhpcy53cy5vbm1lc3NhZ2UgPSBtZXNzYWdlID0+IHsKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7CiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5waW5nKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbmc6IG1lc3NhZ2UucGluZywKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29kZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZDogJ3N1YicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BpY3M6IFtgcm9ib3QjJHt0aGlzLnJvYm90SWR9LmxvZ2AsIGByb2JvdCMke3RoaXMucm9ib3RJZH0uc3RvcmVgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn6K6k6K+B5oiQ5YqfLCDorqLpmIXkuK0uLi4nLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuY29kZSA9PT0gNDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+iupOivgeWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5jYXRlZ29yeSA9PT0gJ3JvYm90TG9nJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9nTGlzdC5wdXNoKG1lc3NhZ2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuY2F0ZWdvcnkgPT09ICdyb2JvdFBvc2l0aW9uU3RvcmUnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvblN0b3JlID0gbWVzc2FnZS5kYXRhOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLmNhdGVnb3J5ID09PSAncm9ib3RPcmRlclN0b3JlJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJTdG9yZSA9IG1lc3NhZ2UuZGF0YTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMud3Mub25vcGVuID0gKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2dMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICBsZXZlbDogJ0lORk8nLAogICAgICAgICAgICAgICAgICAgIHRleHQ6ICflt7Llu7rnq4sgd2Vic29ja2V0IOi/nuaOpSwgdG9rZW4g6K6k6K+B5LitLi4uJywKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5fc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgY21kOiAnYXV0aCcsCiAgICAgICAgICAgICAgICAgICAgYXV0aF90b2tlbjogdGhpcy5hdXRoVG9rZW4sCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy53cy5vbmVycm9yID0gZXZlbnQgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGV2ZW50OicsIGV2ZW50KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy53cy5vbmNsb3NlID0gKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2dMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICBsZXZlbDogJ0VSUk9SJywKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnV2Vic29ja2V0IOi/nuaOpeW3suaWreW8gO+8gScsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLndzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIHJlY29ubmVjdCgpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICAgIGxldmVsOiAnSU5GTycsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+ato+WcqOWwneivlemHjeaWsOW7uueriyBXZWJTb2NrZXQg6L+e5o6lLi4uJywKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5pbml0V2Vic29ja2V0KCk7CiAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgIH0sCgogICAgICAgIF9zZW5kKG1lc3NhZ2UpIHsKICAgICAgICAgICAgdGhpcy53cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uU3VibWl0KG9rLCBldmVudCkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuJHJlZnMucGFyYW1Gb3JtLmZvcm07CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVSb2JvdFN0cmF0ZWd5UGFyYW1ldGVycyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsIGRhdGEpOwogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRTdHJhdGVneVNwZWNWaWV3KCk7CiAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ3BhcmFtLWZvcm0tbW9kYWwnKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDUwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGDmnI3liqHnq6/plJnor686ICR7ZXJyb3IucmVzcG9uc2Uuc3RhdHVzfWAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pu05paw5aSx6LSlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDMwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdGVyOiAnYi10b2FzdGVyLXRvcC1jZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5wYXJhbUZvcm1FcnJvcnMgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yczsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9kbwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoZXJyb3IubWVzc2FnZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmlbDmja7ojrflj5blpLHotKUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hpZGVEZWxheTogMzAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLWNlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvYXN0OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGVycm9yLm1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmlbDmja7ojrflj5blpLHotKUnLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGlkZURlbGF5OiAzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICB0b2FzdGVyOiAnYi10b2FzdGVyLXRvcC1jZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRSb2JvdCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJvYm90UmVzID0gYXdhaXQgZ2V0Um9ib3RzSWQodGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJvYm90UmVzLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLnJvYm90SWQgPSByZXN1bHQuaWQ7CiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uU3RvcmUgPSByZXN1bHRbJ3Bvc2l0aW9uX3N0b3JlJ107CiAgICAgICAgICAgICAgICB0aGlzLm9yZGVyU3RvcmUgPSByZXN1bHRbJ29yZGVyX3N0b3JlJ107CiAgICAgICAgICAgICAgICB0aGlzLm92ZXJ2aWV3RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXN1bHQubmFtZSwKICAgICAgICAgICAgICAgICAgICBwYWlyOiByZXN1bHQucGFpciwKICAgICAgICAgICAgICAgICAgICBtYXJrZXRUeXBlOiByZXN1bHRbJ21hcmtldF90eXBlJ10sCiAgICAgICAgICAgICAgICAgICAgUm9ib3RJZDogdGhpcy5yb2JvdElkLAogICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5TmFtZTogcmVzdWx0WydzdHJhdGVneV9uYW1lJ10sCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q3VycmVuY3k6IHJlc3VsdFsndGFyZ2V0X2N1cnJlbmN5J10sCiAgICAgICAgICAgICAgICAgICAgYmFzZUN1cnJlbmN5OiByZXN1bHRbJ2Jhc2VfY3VycmVuY3knXSwKICAgICAgICAgICAgICAgICAgICBxdW90ZUN1cnJlbmN5OiByZXN1bHRbJ3F1b3RlX2N1cnJlbmN5J10sCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25EaXNwbGF5OiByZXN1bHRbJ2R1cmF0aW9uX2Rpc3BsYXknXSwKICAgICAgICAgICAgICAgICAgICBtYXJrZXRUeXBlRGlzcGxheTogcmVzdWx0WydtYXJrZXRfdHlwZV9kaXNwbGF5J10sCiAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2VOYW1lOiByZXN1bHQuZXhjaGFuZ2UubmFtZSwKICAgICAgICAgICAgICAgICAgICB0ZXN0TmV0OiByZXN1bHRbJ3Rlc3RfbmV0J10sCiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogcmVzdWx0LmVuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmluY2lwYWw6IHJlc3VsdFsnYXNzZXRfcmVjb3JkJ11bJ3RvdGFsX3ByaW5jaXBhbCddLAogICAgICAgICAgICAgICAgICAgIHRvdGFsQmFsYW5jZTogcmVzdWx0Wydhc3NldF9yZWNvcmQnXVsndG90YWxfYmFsYW5jZSddLAogICAgICAgICAgICAgICAgICAgIHRvdGFsUG5sQWJzOiByZXN1bHRbJ2Fzc2V0X3JlY29yZCddWyd0b3RhbF9wbmxfYWJzJ10sCiAgICAgICAgICAgICAgICAgICAgdG90YWxQbmxBYnMyNGg6IHJlc3VsdFsnYXNzZXRfcmVjb3JkJ11bJ3RvdGFsX3BubF9hYnNfMjRoJ10sCiAgICAgICAgICAgICAgICAgICAgdG90YWxQbmxSZWxQdGc6IHJlc3VsdFsnYXNzZXRfcmVjb3JkJ11bJ3RvdGFsX3BubF9yZWxfcHRnJ10sCiAgICAgICAgICAgICAgICAgICAgdG90YWxQbmxSZWxQdGcyNGg6IHJlc3VsdFsnYXNzZXRfcmVjb3JkJ11bJ3RvdGFsX3BubF9yZWxfcHRnXzI0aCddLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoJ+iOt+WPluacuuWZqOS6uuaVsOaNruWksei0pScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfojrflj5bmnLrlmajkurrmlbDmja7lpLHotKUnLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGlkZURlbGF5OiAyMDAwLAogICAgICAgICAgICAgICAgICAgICAgICB0b2FzdGVyOiAnYi10b2FzdGVyLXRvcC1yaWdodCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoZXJyb3IubWVzc2FnZSwgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+iOt+WPluacuuWZqOS6uuaVsOaNruWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDIwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLXJpZ2h0JywKICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvYXN0OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0U3RyYXRlZ3lTcGVjVmlldygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Um9ib3RTdHJhdGVneVNwZWNWaWV3KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICAgICAgICAgICAgICB0aGlzLnN0cmF0ZWd5U3BlY1ZpZXcgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgn562W55Wl6KeG5Zu+6I635Y+W5aSx6LSlJywgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+etlueVpeinhuWbvuiOt+WPluWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDMwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLWNlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoZXJyb3IubWVzc2FnZSwgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+etlueVpeinhuWbvuiOt+WPluWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDMwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXI6ICdiLXRvYXN0ZXItdG9wLWNlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["RobotView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RobotView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <b-row class=\"m-1\">\n        <b-col md=\"8\">\n            <log-panel :logList=\"logList\" />\n            <b-card no-body class=\"mt-3\">\n                <b-tabs card>\n                    <b-tab title=\"持有仓位\" active>\n                        <position :position-store=\"positionStore\"></position>\n                    </b-tab>\n                    <b-tab title=\"当前委托\">\n                        <order :order-store=\"orderStore\"></order>\n                    </b-tab>\n                </b-tabs>\n            </b-card>\n            <!--      <asset-chart/>-->\n        </b-col>\n        <b-col md=\"4\">\n            <overview :overview-data=\"overviewData\" />\n            <b-card header-tag=\"header\" class=\"mt-3\">\n                <template v-slot:header>\n                    <div class=\"d-flex justify-content-between align-items-center\">\n                        <span class=\"h6\">参数预览</span>\n                        <a href=\"#\" v-b-modal.param-form-modal>\n                            <b-icon-pencil-square></b-icon-pencil-square>\n                        </a>\n                    </div>\n                </template>\n                <param-preview :parameters=\"strategySpecView && strategySpecView.parameters\"></param-preview>\n            </b-card>\n        </b-col>\n        <b-modal button-size=\"sm\" size=\"md\" id=\"param-form-modal\" scrollable centered title=\"参数设置\">\n            <param-form ref=\"paramForm\" :fields=\"strategySpecView && strategySpecView.parameters\"></param-form>\n            <template v-slot:modal-footer=\"{ ok }\">\n                <b-button size=\"sm\" variant=\"primary\" @click=\"onSubmit(ok, $event)\">确认</b-button>\n            </template>\n        </b-modal>\n    </b-row>\n</template>\n\n<script>\nimport LogPanel from '@/components/robot-console/LogPanel';\nimport ParamPreview from '../components/ParamPreview';\nimport ParamForm from '../components/ParamForm';\nimport Position from '../components/robot-console/Position';\n// import AssetChart from '../components/robot-console/AssetChart';\nimport Overview from '../components/robot-console/Overview';\nimport Order from '@/components/robot-console/Order';\nimport { getRobotsId } from '@/api';\nimport { getRobotStrategySpecView, updateRobotStrategyParameters } from '@/api/robot';\nimport { mapState } from 'vuex';\n\nexport default {\n    name: 'RobotView',\n    data() {\n        return {\n            logList: [],\n            robotId: null,\n            strategySpecView: null,\n            overviewData: null,\n            positionStore: null,\n            orderStore: null,\n        };\n    },\n    computed: {\n        ...mapState(['authToken']),\n    },\n\n    components: {\n        LogPanel,\n        ParamPreview,\n        ParamForm,\n        Overview,\n        Position,\n        Order,\n        // AssetChart,\n    },\n    async mounted() {\n        await this.getRobot();\n        await this.getStrategySpecView();\n        this.initWebsocket();\n    },\n    beforeDestroy() {\n        if (this.ws) {\n            this._send({\n                cmd: 'unsub',\n                topics: [`robot#${this.robotId}.log`, `robot#${this.robotId}.store`],\n            });\n            const ws = this.ws;\n            this.ws = null;\n            ws.close();\n        }\n    },\n    methods: {\n        initWebsocket() {\n            // 初始化weosocket\n            const wsuri = `${window.conf.websocketApiUri}`; // 这个地址由后端童鞋提供\n            this.ws = new WebSocket(wsuri);\n            this.ws.onmessage = message => {\n                message = JSON.parse(message.data);\n                if (message.ping) {\n                    this._send({\n                        pong: message.ping,\n                    });\n                    return;\n                }\n\n                if (message.code) {\n                    if (message.code === 200) {\n                        this._send({\n                            cmd: 'sub',\n                            topics: [`robot#${this.robotId}.log`, `robot#${this.robotId}.store`],\n                        });\n                        this.logList.push({\n                            timestamp: Date.now(),\n                            level: 'success',\n                            text: '认证成功, 订阅中...',\n                        });\n                    } else if (message.code === 400) {\n                        this.logList.push({\n                            timestamp: Date.now(),\n                            level: 'error',\n                            text: '认证失败',\n                        });\n                    }\n                } else if (message.category === 'robotLog') {\n                    this.logList.push(message.data);\n                } else if (message.category === 'robotPositionStore') {\n                    this.positionStore = message.data;\n                } else if (message.category === 'robotOrderStore') {\n                    this.orderStore = message.data;\n                } else {\n                    console.log(message);\n                }\n            };\n            this.ws.onopen = () => {\n                this.logList.push({\n                    timestamp: Date.now(),\n                    level: 'INFO',\n                    text: '已建立 websocket 连接, token 认证中...',\n                });\n                this._send({\n                    cmd: 'auth',\n                    auth_token: this.authToken,\n                });\n            };\n            this.ws.onerror = event => {\n                console.log('error event:', event);\n            };\n            this.ws.onclose = () => {\n                this.logList.push({\n                    timestamp: Date.now(),\n                    level: 'ERROR',\n                    text: 'Websocket 连接已断开！',\n                });\n                if (this.ws) {\n                    this.reconnect();\n                }\n            };\n        },\n        reconnect() {\n            setTimeout(() => {\n                this.logList.push({\n                    timestamp: Date.now(),\n                    level: 'INFO',\n                    text: '正在尝试重新建立 WebSocket 连接...',\n                });\n                this.initWebsocket();\n            }, 5000);\n        },\n\n        _send(message) {\n            this.ws.send(JSON.stringify(message));\n        },\n        async onSubmit(ok, event) {\n            event.preventDefault();\n            let data = this.$refs.paramForm.form;\n            try {\n                await updateRobotStrategyParameters(this.$route.params.id, data);\n                await this.getStrategySpecView();\n                this.$bvModal.hide('param-form-modal');\n            } catch (error) {\n                if (error.response) {\n                    if (error.response.status === 500) {\n                        this.$bvToast.toast(`服务端错误: ${error.response.status}`, {\n                            title: '更新失败',\n                            autoHideDelay: 3000,\n                            toaster: 'b-toaster-top-center',\n                            variant: 'danger',\n                            appendToast: false,\n                        });\n                    } else if (error.response.status === 400) {\n                        // this.paramFormErrors = error.response.data.errors;\n                        // todo\n                    } else {\n                        this.$bvToast.toast(error.message, {\n                            title: '数据获取失败',\n                            autoHideDelay: 3000,\n                            toaster: 'b-toaster-top-center',\n                            variant: 'danger',\n                            appendToast: false,\n                        });\n                    }\n                } else {\n                    this.$bvToast.toast(error.message, {\n                        title: '数据获取失败',\n                        autoHideDelay: 3000,\n                        toaster: 'b-toaster-top-center',\n                        variant: 'danger',\n                        appendToast: false,\n                    });\n                }\n            }\n        },\n        async getRobot() {\n            try {\n                const robotRes = await getRobotsId(this.$route.params.id);\n                const result = robotRes.data;\n                this.robotId = result.id;\n                this.positionStore = result['position_store'];\n                this.orderStore = result['order_store'];\n                this.overviewData = {\n                    name: result.name,\n                    pair: result.pair,\n                    marketType: result['market_type'],\n                    RobotId: this.robotId,\n                    strategyName: result['strategy_name'],\n                    targetCurrency: result['target_currency'],\n                    baseCurrency: result['base_currency'],\n                    quoteCurrency: result['quote_currency'],\n                    durationDisplay: result['duration_display'],\n                    marketTypeDisplay: result['market_type_display'],\n                    exchangeName: result.exchange.name,\n                    testNet: result['test_net'],\n                    enabled: result.enabled,\n                    totalPrincipal: result['asset_record']['total_principal'],\n                    totalBalance: result['asset_record']['total_balance'],\n                    totalPnlAbs: result['asset_record']['total_pnl_abs'],\n                    totalPnlAbs24h: result['asset_record']['total_pnl_abs_24h'],\n                    totalPnlRelPtg: result['asset_record']['total_pnl_rel_ptg'],\n                    totalPnlRelPtg24h: result['asset_record']['total_pnl_rel_ptg_24h'],\n                };\n            } catch (error) {\n                if (error.response) {\n                    this.$bvToast.toast('获取机器人数据失败', {\n                        title: '获取机器人数据失败',\n                        autoHideDelay: 2000,\n                        toaster: 'b-toaster-top-right',\n                        variant: 'danger',\n                        appendToast: false,\n                    });\n                } else {\n                    this.$bvToast.toast(error.message, {\n                        title: '获取机器人数据失败',\n                        autoHideDelay: 2000,\n                        toaster: 'b-toaster-top-right',\n                        variant: 'danger',\n                        appendToast: false,\n                    });\n                }\n            }\n        },\n        async getStrategySpecView() {\n            try {\n                const response = await getRobotStrategySpecView(this.$route.params.id);\n                this.strategySpecView = response.data;\n            } catch (error) {\n                if (error.response) {\n                    this.$bvToast.toast('策略视图获取失败', {\n                        title: '策略视图获取失败',\n                        autoHideDelay: 3000,\n                        toaster: 'b-toaster-top-center',\n                        variant: 'danger',\n                        appendToast: false,\n                    });\n                } else {\n                    this.$bvToast.toast(error.message, {\n                        title: '策略视图获取失败',\n                        autoHideDelay: 3000,\n                        toaster: 'b-toaster-top-center',\n                        variant: 'danger',\n                        appendToast: false,\n                    });\n                }\n            }\n        },\n    },\n};\n</script>\n\n<style scoped></style>\n"]}]}