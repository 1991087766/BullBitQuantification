{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotUpdateForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/components/RobotUpdateForm.vue","mtime":1619057276517},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJvYm90c0lkLCBwYXRjaFJvYm90c0lkIH0gZnJvbSAnLi4vYXBpJzsKaW1wb3J0IGZvcm1hdHRlck1peGluIGZyb20gJ0AvbWl4aW5zL2Zvcm1hdHRlcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JvYm90VXBkYXRlRm9ybScsCiAgbWl4aW5zOiBbZm9ybWF0dGVyTWl4aW5dLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgZW5hYmxlOiBmYWxzZSwKICAgICAgICBzdHJhdGVneVRlbXBsYXRlOiBudWxsLAogICAgICB9LAogICAgICBzdHJhdGVneVRlbXBsYXRlT3B0aW9uczogW10sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJvYm90SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICBlbmFibGU6IHRoaXMuZm9ybS5lbmFibGUsCiAgICAgIH07CiAgICAgIHBhdGNoUm9ib3RzSWQodGhpcy5yb2JvdElkLCB0aGlzLmZvcm1hdHRlci5zZXJpYWxpemUoeyB0eXBlOiAncm9ib3RzJywgaWQ6IHRoaXMucm9ib3RJZCwgLi4uZGF0YSB9KSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL3JvYm90LyR7dGhpcy5yb2JvdElkfWApOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuZGF0YSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaW5pdFJvYm90Rm9ybShkYXRhKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBuYW1lOiBkYXRhLm5hbWUsCiAgICAgICAgZW5hYmxlZDogZGF0YS5lbmFibGVkLAogICAgICB9OwogICAgfSwKCiAgICBhc3luYyBnZXRSb2JvdHNJZCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFJvYm90c0lkKHRoaXMucm9ib3RJZCk7CiAgICAgICAgdGhpcy5pbml0Um9ib3RGb3JtKHRoaXMuZm9ybWF0dGVyLmRlc2VyaWFsaXplKHJlc3BvbnNlLmRhdGEpKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChg5peg5rOV5pu05paw5py65Zmo5Lq65pWw5o2u77yM6ZSZ6K+v5L+h5oGv77yaJHtlcnIuZGF0YSB8fCAn5pyq55+l6ZSZ6K+vJ31gLCB7CiAgICAgICAgICB0aXRsZTogJ+aVsOaNruabtOaWsOWksei0pScsCiAgICAgICAgICBhdXRvSGlkZURlbGF5OiAzMDAwLAogICAgICAgICAgdG9hc3RlcjogJ2ItdG9hc3Rlci10b3AtcmlnaHQnLAogICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICBhcHBlbmRUb2FzdDogZmFsc2UsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRSb2JvdHNJZCgpOwogIH0sCn07Cg=="},{"version":3,"sources":["RobotUpdateForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RobotUpdateForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-card class=\"mt-2\">\n    <b-form @submit=\"onSubmit\">\n      <b-form-row>\n        <b-col md=\"12\">\n          <label>名字</label>\n        </b-col>\n        <b-col md=\"12\">\n          <b-form-input type=\"text\" v-model=\"form.name\"></b-form-input>\n        </b-col>\n      </b-form-row>\n      <b-form-row class=\"mt-2\">\n        <b-col md=\"12\">\n          <label>启用</label>\n        </b-col>\n        <b-col md=\"12\">\n          <b-form-checkbox id=\"id_enable\" v-model=\"form.enable\" name=\"enable\" value=\"true\" unchecked-value=\"false\">\n          </b-form-checkbox>\n        </b-col>\n      </b-form-row>\n      <b-button block type=\"submit\" variant=\"primary\" class=\"mt-3\">更新</b-button>\n    </b-form>\n  </b-card>\n</template>\n\n<script>\nimport { getRobotsId, patchRobotsId } from '../api';\nimport formatterMixin from '@/mixins/formatter';\n\nexport default {\n  name: 'RobotUpdateForm',\n  mixins: [formatterMixin],\n  data() {\n    return {\n      form: {\n        name: '',\n        enable: false,\n        strategyTemplate: null,\n      },\n      strategyTemplateOptions: [],\n    };\n  },\n  computed: {\n    robotId() {\n      return this.$route.params.id;\n    },\n  },\n  methods: {\n    onSubmit(evt) {\n      evt.preventDefault();\n      let data = {\n        name: this.form.name,\n        enable: this.form.enable,\n      };\n      patchRobotsId(this.robotId, this.formatter.serialize({ type: 'robots', id: this.robotId, ...data }))\n        .then(() => {\n          this.$router.push(`/robot/${this.robotId}`);\n        })\n        .catch(err => {\n          console.log(err.data);\n        });\n    },\n    initRobotForm(data) {\n      this.form = {\n        name: data.name,\n        enabled: data.enabled,\n      };\n    },\n\n    async getRobotsId() {\n      try {\n        const response = await getRobotsId(this.robotId);\n        this.initRobotForm(this.formatter.deserialize(response.data));\n      } catch (err) {\n        this.$bvToast.toast(`无法更新机器人数据，错误信息：${err.data || '未知错误'}`, {\n          title: '数据更新失败',\n          autoHideDelay: 3000,\n          toaster: 'b-toaster-top-right',\n          variant: 'danger',\n          appendToast: false,\n        });\n      }\n    },\n  },\n  mounted() {\n    this.getRobotsId();\n  },\n};\n</script>\n"]}]}