{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/navyxu/PycharmProjects/ox/frontend/src/components/robot-console/LogPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/components/robot-console/LogPanel.vue","mtime":1619057276518},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdMb2dQYW5lbCcsCiAgICBwcm9wczogWydsb2dMaXN0J10sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJvYm90SWQ6IG51bGwsCiAgICAgICAgICAgIHdzOiBudWxsLAogICAgICAgIH07CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBsb2dMaXN0KCkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbCgpOwogICAgICAgIH0sCiAgICB9LAogICAgZmlsdGVyczogewogICAgICAgIHRpbWVGb3JtYXR0ZXIodGltZXN0YW1wKSB7CiAgICAgICAgICAgIHJldHVybiBtb21lbnQodGltZXN0YW1wKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTsKICAgICAgICB9LAogICAgfSwKCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMucm9ib3RJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIHVwZGF0ZVNjcm9sbCgpIHsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5yb2JvdExvZ1VsLnNjcm9sbFRvcCA9CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5yb2JvdExvZ1VsLnNjcm9sbEhlaWdodCAtIHRoaXMuJHJlZnMucm9ib3RMb2dVbC5jbGllbnRIZWlnaHQ7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgbGV2ZWxDb2xvcihsZXZlbCkgewogICAgICAgICAgICBzd2l0Y2ggKGxldmVsLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ0RFQlVHJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RleHQtc2Vjb25kYXJ5JzsKICAgICAgICAgICAgICAgIGNhc2UgJ0lORk8nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC1pbmZvJzsKICAgICAgICAgICAgICAgIGNhc2UgJ1dBUk5JTkcnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC13YXJuaW5nJzsKICAgICAgICAgICAgICAgIGNhc2UgJ0VSUk9SJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RleHQtZGFuZ2VyJzsKICAgICAgICAgICAgICAgIGNhc2UgJ1NVQ0NFU1MnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC1zdWNjZXNzJzsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["LogPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LogPanel.vue","sourceRoot":"src/components/robot-console","sourcesContent":["<template>\n    <b-card no-body header-tag=\"header\" bg-variant=\"dark\" text-variant=\"white\">\n        <template v-slot:header>\n            <div>\n                <span>日志监控</span>\n            </div>\n        </template>\n        <ul class=\"list-unstyled robot-log-ul px-3 pt-2 pb-5 small mb-0 log-content\" ref=\"robotLogUl\">\n            <li v-for=\"(log, index) in logList\" :key=\"index\">\n                <span v-if=\"log.timestamp\">{{ log.timestamp | timeFormatter }}</span>\n                <span v-if=\"log.level\" :class=\"['mx-1', levelColor(log.level)]\">{{ log.level.toUpperCase() }}</span>\n                {{ log.text }}\n            </li>\n            <li v-if=\"!logList.length\">正在等待接收日志......</li>\n        </ul>\n    </b-card>\n</template>\n\n<script>\nimport moment from 'moment';\n\nexport default {\n    name: 'LogPanel',\n    props: ['logList'],\n    data() {\n        return {\n            robotId: null,\n            ws: null,\n        };\n    },\n    watch: {\n        logList() {\n            this.updateScroll();\n        },\n    },\n    filters: {\n        timeFormatter(timestamp) {\n            return moment(timestamp).format('YYYY-MM-DD HH:mm:ss');\n        },\n    },\n\n    mounted() {\n        this.robotId = this.$route.params.id;\n    },\n\n    methods: {\n        updateScroll() {\n            this.$nextTick(() => {\n                this.$refs.robotLogUl.scrollTop =\n                    this.$refs.robotLogUl.scrollHeight - this.$refs.robotLogUl.clientHeight;\n            });\n        },\n        levelColor(level) {\n            switch (level.toUpperCase()) {\n                case 'DEBUG':\n                    return 'text-secondary';\n                case 'INFO':\n                    return 'text-info';\n                case 'WARNING':\n                    return 'text-warning';\n                case 'ERROR':\n                    return 'text-danger';\n                case 'SUCCESS':\n                    return 'text-success';\n                default:\n                    return '';\n            }\n        },\n    },\n};\n</script>\n\n<style>\n.log-content {\n    height: 360px;\n    /* max-height: 70vh; */\n    padding-bottom: 50px;\n    overflow-y: scroll;\n}\n\n.log-content::-webkit-scrollbar-track {\n    background-color: #343a40;\n    border-radius: 8px;\n}\n\n.log-content::-webkit-scrollbar-thumb {\n    background-color: black;\n    border-radius: 5px;\n}\n\n.log-content::-webkit-scrollbar {\n    width: 6px;\n}\n</style>\n"]}]}