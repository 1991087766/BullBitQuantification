{"remainingRequest":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/navyxu/PycharmProjects/ox/frontend/src/axiosService.js","dependencies":[{"path":"/Users/navyxu/PycharmProjects/ox/frontend/src/axiosService.js","mtime":1619057276516},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/navyxu/PycharmProjects/ox/frontend/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yYWdlIGZyb20gJy4vdXRpbHMnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmV4cG9ydCB2YXIgYW5ub25JbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogd2luZG93LmNvbmYucmVzdEFwaUJhc2VVcmwsCiAgdGltZW91dDogMTAwMDAKfSk7CmFubm9uSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgY29uZmlnLmhlYWRlcnNbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwogIHJldHVybiBjb25maWc7Cn0pOwpleHBvcnQgdmFyIGF1dGhJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogd2luZG93LmNvbmYucmVzdEFwaUJhc2VVcmwsCiAgdGltZW91dDogMTAwMDAKfSk7CmF1dGhJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKICBjb25maWcuaGVhZGVyc1snQWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbic7CgogIGlmIChzdG9yZS5zdGF0ZS5hdXRoVG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnVG9rZW4gJyArIHN0b3JlLnN0YXRlLmF1dGhUb2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0pOwphdXRoSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgc3RvcmFnZS5jbGVhcigpOwoKICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvbG9naW4nKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8jL2xvZ2luJzsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTs="},{"version":3,"sources":["/Users/navyxu/PycharmProjects/ox/frontend/src/axiosService.js"],"names":["axios","storage","store","annonInstance","create","baseURL","window","conf","restApiBaseUrl","timeout","interceptors","request","use","config","headers","authInstance","state","authToken","response","error","status","clear","location","pathname","href","Promise","reject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAO,IAAMC,aAAa,GAAGH,KAAK,CAACI,MAAN,CAAa;AACtCC,EAAAA,OAAO,EAAEC,MAAM,CAACC,IAAP,CAAYC,cADiB;AAEtCC,EAAAA,OAAO,EAAE;AAF6B,CAAb,CAAtB;AAIPN,aAAa,CAACO,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAuC,UAASC,MAAT,EAAiB;AACpDA,EAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiC,kBAAjC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,QAAf,IAA2B,kBAA3B;AACA,SAAOD,MAAP;AACH,CAJD;AAMA,OAAO,IAAME,YAAY,GAAGf,KAAK,CAACI,MAAN,CAAa;AACrCC,EAAAA,OAAO,EAAEC,MAAM,CAACC,IAAP,CAAYC,cADgB;AAErCC,EAAAA,OAAO,EAAE;AAF4B,CAAb,CAArB;AAKPM,YAAY,CAACL,YAAb,CAA0BC,OAA1B,CAAkCC,GAAlC,CAAsC,UAASC,MAAT,EAAiB;AACnDA,EAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiC,kBAAjC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,QAAf,IAA2B,kBAA3B;;AACA,MAAIZ,KAAK,CAACc,KAAN,CAAYC,SAAhB,EAA2B;AACvBJ,IAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkC,WAAWZ,KAAK,CAACc,KAAN,CAAYC,SAAzD;AACH;;AACD,SAAOJ,MAAP;AACH,CAPD;AASAE,YAAY,CAACL,YAAb,CAA0BQ,QAA1B,CAAmCN,GAAnC,CACI,UAAAM,QAAQ,EAAI;AACR,SAAOA,QAAP;AACH,CAHL,EAII,UAAAC,KAAK,EAAI;AACL,MAAIA,KAAK,CAACD,QAAN,CAAeE,MAAf,KAA0B,GAA9B,EAAmC;AAC/BnB,IAAAA,OAAO,CAACoB,KAAR;;AAEA,QAAIf,MAAM,CAACgB,QAAP,CAAgBC,QAAhB,KAA6B,QAAjC,EAA2C;AACvCjB,MAAAA,MAAM,CAACgB,QAAP,CAAgBE,IAAhB,GAAuB,UAAvB;AACA,aAAO,IAAP;AACH;AACJ;;AAED,SAAOC,OAAO,CAACC,MAAR,CAAeP,KAAf,CAAP;AACH,CAfL","sourcesContent":["import axios from 'axios';\nimport storage from './utils';\nimport store from './store';\n\nexport const annonInstance = axios.create({\n    baseURL: window.conf.restApiBaseUrl,\n    timeout: 10000,\n});\nannonInstance.interceptors.request.use(function(config) {\n    config.headers['Content-Type'] = 'application/json';\n    config.headers['Accept'] = 'application/json';\n    return config;\n});\n\nexport const authInstance = axios.create({\n    baseURL: window.conf.restApiBaseUrl,\n    timeout: 10000,\n});\n\nauthInstance.interceptors.request.use(function(config) {\n    config.headers['Content-Type'] = 'application/json';\n    config.headers['Accept'] = 'application/json';\n    if (store.state.authToken) {\n        config.headers['Authorization'] = 'Token ' + store.state.authToken;\n    }\n    return config;\n});\n\nauthInstance.interceptors.response.use(\n    response => {\n        return response;\n    },\n    error => {\n        if (error.response.status === 401) {\n            storage.clear();\n\n            if (window.location.pathname !== '/login') {\n                window.location.href = '/#/login';\n                return null;\n            }\n        }\n\n        return Promise.reject(error);\n    },\n);\n"]}]}